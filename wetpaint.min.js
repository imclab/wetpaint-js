if(wetpaint===undefined)var wetpaint={};
wetpaint.atk=function(b){if(b.getContext===undefined)b=document.getElementById(b);var g=b.getContext("2d"),f=b.width,h=b.width;b={};var c=null;b.dither_canvas=function(a,d){var e=a.getContext("2d").getImageData(0,0,f,h);g.putImageData(e,0,0);this.dither(d)};b.dither_image=function(a,d){g.drawImage(a,0,0);this.dither(d)};b.dither=function(a){c=g.getImageData(0,0,f,h);this.endotify(c);g.putImageData(c,0,0);a!==undefined&&a()};b.endotify=function(a){f=a.width;h=a.height;for(y=0;y<h;y++){thisRow=[];for(x=
0;x<f;x++){i=y*4*f+x*4;avg=this.getAverage(x,y);newavg=this.findClosestValue(avg);this.setPixel(x,y,newavg);err=avg-newavg;this.setPixel(x+1,y,this.getAverage(x+1,y)+0.125*err);this.setPixel(x+2,y,this.getAverage(x+2,y)+0.125*err);this.setPixel(x-1,y+1,this.getAverage(x-1,y+1)+0.125*err);this.setPixel(x,y+1,this.getAverage(x,y+1)+0.125*err);this.setPixel(x+1,y+1,this.getAverage(x+1,y+1)+0.125*err);this.setPixel(x,y+2,this.getAverage(x,y+2)+0.125*err)}}};b.findClosestValue=function(a){return a>130?
255:0};b.getPixelIndex=function(a,d){return d*4*c.width+a*4};b.getAverage=function(a,d){var e=this.getPixelIndex(a,d);return(c.data[e]+c.data[e+1]+c.data[e+2])/3};b.setPixel=function(a,d,e){a=this.getPixelIndex(a,d);c.data[a]=e;c.data[a+1]=e;c.data[a+2]=e};return b};
